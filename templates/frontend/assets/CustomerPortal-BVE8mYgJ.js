import{r as f,l as N,N as M,e as i,f as e,k as v,D as p,E as g,K as D,L as U,i as k,H as n,C as q,o as d,J as h,F,I,s as A,h as V,u as L}from"./vendor-D1ADADCB.js";import{c as S}from"./customers-CdfIX3NW.js";import{_ as O,l as C}from"./index-CYFIV7Ul.js";import"./ui-D_DTyfBr.js";const B={class:"mb-4"},E={class:"row"},R={class:"col-md-8 mb-3"},W={class:"col-md-4 mb-3"},j={class:"row"},H={class:"col-md-6 mb-3"},K={class:"col-md-6 mb-3"},z={class:"row"},G={class:"col-md-6 mb-3"},J={class:"col-md-6 mb-3"},Q={class:"mb-4"},X={class:"mb-3"},Y={class:"mb-3"},Z={class:"row"},ee={class:"col-md-6 mb-3"},te={class:"col-md-6 mb-3"},se={class:"mb-3"},oe={class:"mb-4"},ae={class:"row"},le={class:"col-md-6 mb-3"},re={class:"col-md-6 mb-3"},ne={class:"alert alert-info"},ie={key:0,class:"alert alert-danger"},de={class:"d-flex justify-content-end"},ue=["disabled"],ce={key:0,class:"spinner-border spinner-border-sm me-2"},me={__name:"CreateOrderForm",emits:["order-created","cancel"],setup(T,{emit:x}){const _=x,r=f(!1),y=f(""),s=N({package:{description:"",weight:"",dimensions:"",package_type:"",value:"",special_instructions:""},delivery:{pickup_address:"",delivery_address:"",estimated_pickup:"",estimated_delivery:"",priority:"1"},payment:{payment_method:"",amount:0}}),b=()=>((parseFloat(s.package.weight)||0)*10).toFixed(2),w=()=>{const c=parseInt(s.delivery.priority);return c===1?"Standard":c===2?"+50%":c===3?"+100%":"Standard"};M(()=>[s.package.weight,s.delivery.priority],()=>{const c=parseFloat(b()),t=parseInt(s.delivery.priority);let o=1;t===2&&(o=1.5),t===3&&(o=2),s.payment.amount=(c*o).toFixed(2)},{immediate:!0});const P=async()=>{y.value="",r.value=!0;try{const c={package:{...s.package,weight:parseFloat(s.package.weight),value:parseFloat(s.package.value)||0},delivery:{...s.delivery,estimated_pickup:new Date(s.delivery.estimated_pickup).toISOString(),estimated_delivery:new Date(s.delivery.estimated_delivery).toISOString(),priority:parseInt(s.delivery.priority)},payment:{...s.payment,amount:parseFloat(s.payment.amount)}};await S.createOrder(c),_("order-created")}catch(c){y.value=c.response?.data?.error||"Failed to create order. Please try again.",C.error(y.value)}finally{r.value=!1}};return(c,t)=>(d(),i("form",{onSubmit:q(P,["prevent"])},[e("div",B,[t[21]||(t[21]=e("h6",{class:"border-bottom pb-2 mb-3"},"Package Information",-1)),e("div",E,[e("div",R,[t[14]||(t[14]=e("label",{for:"description",class:"form-label"},"Package Description *",-1)),p(e("textarea",{class:"form-control",id:"description",rows:"2","onUpdate:modelValue":t[0]||(t[0]=o=>s.package.description=o),required:""},null,512),[[g,s.package.description]])]),e("div",W,[t[15]||(t[15]=e("label",{for:"weight",class:"form-label"},"Weight (kg) *",-1)),p(e("input",{type:"number",step:"0.1",class:"form-control",id:"weight","onUpdate:modelValue":t[1]||(t[1]=o=>s.package.weight=o),required:""},null,512),[[g,s.package.weight]])])]),e("div",j,[e("div",H,[t[16]||(t[16]=e("label",{for:"dimensions",class:"form-label"},"Dimensions (LxWxH cm) *",-1)),p(e("input",{type:"text",class:"form-control",id:"dimensions","onUpdate:modelValue":t[2]||(t[2]=o=>s.package.dimensions=o),placeholder:"30x20x10",required:""},null,512),[[g,s.package.dimensions]])]),e("div",K,[t[18]||(t[18]=e("label",{for:"package_type",class:"form-label"},"Package Type *",-1)),p(e("select",{class:"form-control",id:"package_type","onUpdate:modelValue":t[3]||(t[3]=o=>s.package.package_type=o),required:""},[...t[17]||(t[17]=[U('<option value="" data-v-566d9ba7>Select Type</option><option value="document" data-v-566d9ba7>Document</option><option value="parcel" data-v-566d9ba7>Parcel</option><option value="fragile" data-v-566d9ba7>Fragile</option><option value="perishable" data-v-566d9ba7>Perishable</option>',5)])],512),[[D,s.package.package_type]])])]),e("div",z,[e("div",G,[t[19]||(t[19]=e("label",{for:"value",class:"form-label"},"Package Value ($)",-1)),p(e("input",{type:"number",step:"0.01",class:"form-control",id:"value","onUpdate:modelValue":t[4]||(t[4]=o=>s.package.value=o)},null,512),[[g,s.package.value]])]),e("div",J,[t[20]||(t[20]=e("label",{for:"special_instructions",class:"form-label"},"Special Instructions",-1)),p(e("input",{type:"text",class:"form-control",id:"special_instructions","onUpdate:modelValue":t[5]||(t[5]=o=>s.package.special_instructions=o)},null,512),[[g,s.package.special_instructions]])])])]),e("div",Q,[t[28]||(t[28]=e("h6",{class:"border-bottom pb-2 mb-3"},"Delivery Information",-1)),e("div",X,[t[22]||(t[22]=e("label",{for:"pickup_address",class:"form-label"},"Pickup Address *",-1)),p(e("textarea",{class:"form-control",id:"pickup_address",rows:"2","onUpdate:modelValue":t[6]||(t[6]=o=>s.delivery.pickup_address=o),required:""},null,512),[[g,s.delivery.pickup_address]])]),e("div",Y,[t[23]||(t[23]=e("label",{for:"delivery_address",class:"form-label"},"Delivery Address *",-1)),p(e("textarea",{class:"form-control",id:"delivery_address",rows:"2","onUpdate:modelValue":t[7]||(t[7]=o=>s.delivery.delivery_address=o),required:""},null,512),[[g,s.delivery.delivery_address]])]),e("div",Z,[e("div",ee,[t[24]||(t[24]=e("label",{for:"estimated_pickup",class:"form-label"},"Estimated Pickup *",-1)),p(e("input",{type:"datetime-local",class:"form-control",id:"estimated_pickup","onUpdate:modelValue":t[8]||(t[8]=o=>s.delivery.estimated_pickup=o),required:""},null,512),[[g,s.delivery.estimated_pickup]])]),e("div",te,[t[25]||(t[25]=e("label",{for:"estimated_delivery",class:"form-label"},"Estimated Delivery *",-1)),p(e("input",{type:"datetime-local",class:"form-control",id:"estimated_delivery","onUpdate:modelValue":t[9]||(t[9]=o=>s.delivery.estimated_delivery=o),required:""},null,512),[[g,s.delivery.estimated_delivery]])])]),e("div",se,[t[27]||(t[27]=e("label",{for:"priority",class:"form-label"},"Delivery Priority",-1)),p(e("select",{class:"form-control",id:"priority","onUpdate:modelValue":t[10]||(t[10]=o=>s.delivery.priority=o)},[...t[26]||(t[26]=[e("option",{value:"1"},"Normal (Standard Fee)",-1),e("option",{value:"2"},"Express (+50% Fee)",-1),e("option",{value:"3"},"Urgent (+100% Fee)",-1)])],512),[[D,s.delivery.priority]])])]),e("div",oe,[t[33]||(t[33]=e("h6",{class:"border-bottom pb-2 mb-3"},"Payment Information",-1)),e("div",ae,[e("div",le,[t[30]||(t[30]=e("label",{for:"payment_method",class:"form-label"},"Payment Method *",-1)),p(e("select",{class:"form-control",id:"payment_method","onUpdate:modelValue":t[11]||(t[11]=o=>s.payment.payment_method=o),required:""},[...t[29]||(t[29]=[U('<option value="" data-v-566d9ba7>Select Payment Method</option><option value="cash" data-v-566d9ba7>Cash on Delivery</option><option value="card" data-v-566d9ba7>Credit/Debit Card</option><option value="bank" data-v-566d9ba7>Bank Transfer</option><option value="mobile" data-v-566d9ba7>Mobile Money</option>',5)])],512),[[D,s.payment.payment_method]])]),e("div",re,[t[31]||(t[31]=e("label",{for:"amount",class:"form-label"},"Amount ($)",-1)),p(e("input",{type:"number",step:"0.01",class:"form-control",id:"amount","onUpdate:modelValue":t[12]||(t[12]=o=>s.payment.amount=o),readonly:""},null,512),[[g,s.payment.amount]])])]),e("div",ne,[t[32]||(t[32]=e("strong",null,"Estimated Cost:",-1)),k(" Base: $"+n(b())+" | Priority: "+n(w())+" | ",1),e("strong",null,"Total: $"+n(s.payment.amount),1)])]),y.value?(d(),i("div",ie,n(y.value),1)):v("",!0),e("div",de,[e("button",{type:"button",class:"btn btn-secondary me-2",onClick:t[13]||(t[13]=o=>c.$emit("cancel"))}," Cancel "),e("button",{type:"submit",class:"btn btn-primary",disabled:r.value},[r.value?(d(),i("span",ce)):v("",!0),t[34]||(t[34]=k(" Create Order ",-1))],8,ue)])],32))}},pe=O(me,[["__scopeId","data-v-566d9ba7"]]),ve={class:"track-order"},ye={key:0,class:"mb-4"},be={class:"input-group"},_e=["disabled"],ge={key:0,class:"spinner-border spinner-border-sm me-2"},ke={key:0,class:"alert alert-danger mt-2"},fe={key:1,class:"tracking-results"},$e={class:"card mb-3"},he={class:"card-body"},we={class:"row"},Ce={class:"col-md-6"},xe={class:"h5 text-primary"},Pe={class:"col-md-6"},De={class:"row"},Se={class:"col-md-6"},Oe={class:"text-muted"},Te={class:"col-md-6"},Ue={class:"text-muted"},Ve={key:0,class:"card mb-3"},Fe={class:"card-body"},Ie={class:"row"},Ne={class:"col-md-4"},Me={class:"col-md-4"},qe={class:"col-md-4"},Ae={class:"card"},Le={class:"card-body"},Be={key:0},Ee={key:1},Re={class:"timeline"},We={class:"timeline-content"},je={class:"text-muted mb-1"},He={key:0,class:"mb-1"},Ke={key:1,class:"mb-0"},ze={__name:"TrackOrder",emits:["close"],setup(T,{emit:x}){const _=f(""),r=f(null),y=f(!1),s=f(""),b=async()=>{if(!_.value.trim()){s.value="Please enter a tracking number";return}s.value="",y.value=!0;try{const o=await S.trackOrder(_.value.trim());r.value=o.data,C.success("Order found!")}catch(o){s.value=o.response?.data?.error||"Tracking number not found",C.error(s.value)}finally{y.value=!1}},w=()=>{r.value=null,_.value="",s.value=""},P=o=>({pending:"warning",assigned:"info",picked_up:"primary",in_transit:"primary",delivered:"success",failed:"danger",cancelled:"secondary"})[o]||"secondary",c=o=>({pending:"warning",paid:"success",failed:"danger",refunded:"info"})[o]||"secondary",t=o=>new Date(o).toLocaleString();return(o,a)=>(d(),i("div",ve,[r.value?v("",!0):(d(),i("div",ye,[e("div",be,[p(e("input",{type:"text",class:"form-control",placeholder:"Enter tracking number (e.g., PKG123456789ABC)","onUpdate:modelValue":a[0]||(a[0]=$=>_.value=$)},null,512),[[g,_.value]]),e("button",{class:"btn btn-primary",onClick:b,disabled:y.value},[y.value?(d(),i("span",ge)):v("",!0),a[1]||(a[1]=k(" Track ",-1))],8,_e)]),s.value?(d(),i("div",ke,n(s.value),1)):v("",!0)])),r.value?(d(),i("div",fe,[e("div",{class:"d-flex justify-content-between align-items-center mb-3"},[a[2]||(a[2]=e("h5",null,"Order Tracking Results",-1)),e("button",{class:"btn btn-sm btn-outline-secondary",onClick:w}," Track Another Order ")]),e("div",$e,[e("div",he,[e("div",we,[e("div",Ce,[a[3]||(a[3]=e("h6",null,"Tracking Number",-1)),e("p",xe,n(r.value.tracking_number),1)]),e("div",Pe,[a[4]||(a[4]=e("h6",null,"Status",-1)),e("span",{class:h(`badge bg-${P(r.value.status)} fs-6`)},n(r.value.status.replace("_"," ").toUpperCase()),3)])]),a[8]||(a[8]=e("hr",null,null,-1)),e("div",De,[e("div",Se,[a[5]||(a[5]=e("h6",null,"Package",-1)),e("p",null,n(r.value.package?.description),1),e("small",Oe," Weight: "+n(r.value.package?.weight)+"kg | Type: "+n(r.value.package?.package_type),1)]),e("div",Te,[a[7]||(a[7]=e("h6",null,"Delivery Address",-1)),e("p",null,n(r.value.delivery_address),1),e("small",Ue,[k(" Pickup: "+n(t(r.value.estimated_pickup)),1),a[6]||(a[6]=e("br",null,null,-1)),k(" Delivery: "+n(t(r.value.estimated_delivery)),1)])])])])]),r.value.payment?(d(),i("div",Ve,[e("div",Fe,[a[12]||(a[12]=e("h6",null,"Payment Information",-1)),e("div",Ie,[e("div",Ne,[a[9]||(a[9]=e("strong",null,"Amount:",-1)),k(" $"+n(r.value.payment.amount),1)]),e("div",Me,[a[10]||(a[10]=e("strong",null,"Method:",-1)),k(" "+n(r.value.payment.payment_method.toUpperCase()),1)]),e("div",qe,[a[11]||(a[11]=e("strong",null,"Status:",-1)),e("span",{class:h(`badge bg-${c(r.value.payment.status)}`)},n(r.value.payment.status.toUpperCase()),3)])])])])):v("",!0),e("div",Ae,[a[17]||(a[17]=e("div",{class:"card-header"},[e("h6",{class:"mb-0"},"Delivery Timeline")],-1)),e("div",Le,[!r.value.status_updates||r.value.status_updates.length===0?(d(),i("div",Be,[...a[13]||(a[13]=[e("p",{class:"text-muted"},"No status updates available yet.",-1)])])):(d(),i("div",Ee,[e("div",Re,[(d(!0),i(F,null,I(r.value.status_updates,($,m)=>(d(),i("div",{key:m,class:h(["timeline-item",{active:m===0}])},[a[16]||(a[16]=e("div",{class:"timeline-marker"},null,-1)),e("div",We,[e("h6",null,n($.status.replace("_"," ").toUpperCase()),1),e("p",je,n(t($.created_at)),1),$.location?(d(),i("p",He,[a[14]||(a[14]=e("i",{class:"bi bi-geo-alt"},null,-1)),k(" "+n($.location),1)])):v("",!0),$.notes?(d(),i("p",Ke,[a[15]||(a[15]=e("i",{class:"bi bi-chat-text"},null,-1)),k(" "+n($.notes),1)])):v("",!0)])],2))),128))])]))])])])):v("",!0)]))}},Ge=O(ze,[["__scopeId","data-v-348a7b5c"]]),Je={class:"customer-portal"},Qe={class:"container-fluid"},Xe={class:"row mb-4"},Ye={class:"col-12"},Ze={class:"d-flex justify-content-between align-items-center"},et={class:"me-3"},tt={key:0,class:"row mb-4"},st={class:"col-md-3"},ot={class:"card text-white bg-primary"},at={class:"card-body"},lt={class:"card-text display-6"},rt={class:"col-md-3"},nt={class:"card text-white bg-warning"},it={class:"card-body"},dt={class:"card-text display-6"},ut={class:"col-md-3"},ct={class:"card text-white bg-success"},mt={class:"card-body"},pt={class:"card-text display-6"},vt={class:"col-md-3"},yt={class:"card text-white bg-info"},bt={class:"card-body"},_t={class:"card-text display-6"},gt={class:"row mb-4"},kt={class:"col-12"},ft={class:"row"},$t={class:"col-12"},ht={class:"card"},wt={class:"card-body"},Ct={key:0,class:"text-center"},xt={key:1,class:"text-center"},Pt={key:2},Dt={class:"table-responsive"},St={class:"table table-hover"},Ot={key:1,class:"badge bg-secondary"},Tt=["onClick"],Ut={class:"modal-dialog modal-lg"},Vt={class:"modal-content"},Ft={class:"modal-header"},It={class:"modal-body"},Nt={key:1,class:"modal-backdrop fade show"},Mt={class:"modal-dialog"},qt={class:"modal-content"},At={class:"modal-header"},Lt={class:"modal-body"},Bt={key:3,class:"modal-backdrop fade show"},Et={__name:"CustomerPortal",setup(T){const x=L(),_=f(!1),r=f(null),y=f(null),s=f(!1),b=f(!1),w=async()=>{_.value=!0;try{const m=await S.getPortal();r.value=m.data,y.value=m.data.customer}catch(m){C.error("Failed to load portal data"),m.response?.status===401&&x.push("/customer-login")}finally{_.value=!1}},P=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),C.success("Logged out successfully"),x.push("/customer-login")},c=()=>{s.value=!1,w(),C.success("Order created successfully!")},t=m=>{b.value=!0},o=m=>({pending:"warning",assigned:"info",picked_up:"primary",in_transit:"primary",delivered:"success",failed:"danger",cancelled:"secondary"})[m]||"secondary",a=m=>({pending:"warning",paid:"success",failed:"danger",refunded:"info"})[m]||"secondary",$=m=>new Date(m).toLocaleDateString();return A(()=>{w()}),(m,l)=>(d(),i("div",Je,[e("div",Qe,[e("div",Xe,[e("div",Ye,[e("div",Ze,[l[6]||(l[6]=e("h2",null,"Customer Portal",-1)),e("div",null,[e("span",et,"Welcome, "+n(y.value?.name||"Customer"),1),e("button",{onClick:P,class:"btn btn-outline-danger btn-sm"}," Logout ")])])])]),r.value?(d(),i("div",tt,[e("div",st,[e("div",ot,[e("div",at,[l[7]||(l[7]=e("h5",{class:"card-title"},"Total Orders",-1)),e("p",lt,n(r.value.stats.total_orders||0),1)])])]),e("div",rt,[e("div",nt,[e("div",it,[l[8]||(l[8]=e("h5",{class:"card-title"},"Pending Orders",-1)),e("p",dt,n(r.value.stats.pending_orders||0),1)])])]),e("div",ut,[e("div",ct,[e("div",mt,[l[9]||(l[9]=e("h5",{class:"card-title"},"Completed Orders",-1)),e("p",pt,n(r.value.stats.completed_orders||0),1)])])]),e("div",vt,[e("div",yt,[e("div",bt,[l[10]||(l[10]=e("h5",{class:"card-title"},"Total Spent",-1)),e("p",_t,"$"+n(r.value.stats.total_spent||0),1)])])])])):v("",!0),e("div",gt,[e("div",kt,[e("button",{onClick:l[0]||(l[0]=u=>s.value=!0),class:"btn btn-primary me-3"},[...l[11]||(l[11]=[e("i",{class:"bi bi-plus-circle"},null,-1),k(" Create New Order ",-1)])]),e("button",{onClick:l[1]||(l[1]=u=>b.value=!0),class:"btn btn-outline-primary"},[...l[12]||(l[12]=[e("i",{class:"bi bi-search"},null,-1),k(" Track Order ",-1)])])])]),e("div",ft,[e("div",$t,[e("div",ht,[l[16]||(l[16]=e("div",{class:"card-header"},[e("h5",{class:"mb-0"},"My Orders")],-1)),e("div",wt,[_.value?(d(),i("div",Ct,[...l[13]||(l[13]=[e("div",{class:"spinner-border"},null,-1)])])):!r.value||!r.value.orders||r.value.orders.length===0?(d(),i("div",xt,[...l[14]||(l[14]=[e("p",null,"No orders found. Create your first order to get started!",-1)])])):(d(),i("div",Pt,[e("div",Dt,[e("table",St,[l[15]||(l[15]=e("thead",null,[e("tr",null,[e("th",null,"Tracking Number"),e("th",null,"Package"),e("th",null,"Destination"),e("th",null,"Status"),e("th",null,"Delivery Fee"),e("th",null,"Payment"),e("th",null,"Created"),e("th",null,"Actions")])],-1)),e("tbody",null,[(d(!0),i(F,null,I(r.value.orders,u=>(d(),i("tr",{key:u.id},[e("td",null,[e("strong",null,n(u.tracking_number),1)]),e("td",null,n(u.package?.description?.substring(0,30))+"...",1),e("td",null,n(u.delivery_address?.substring(0,40))+"...",1),e("td",null,[e("span",{class:h(`badge bg-${o(u.status)}`)},n(u.status.replace("_"," ").toUpperCase()),3)]),e("td",null,"$"+n(u.delivery_fee),1),e("td",null,[u.payment?(d(),i("span",{key:0,class:h(`badge bg-${a(u.payment.status)}`)},n(u.payment.status.toUpperCase()),3)):(d(),i("span",Ot,"No Payment"))]),e("td",null,n($(u.created_at)),1),e("td",null,[e("button",{onClick:Rt=>t(u.tracking_number),class:"btn btn-sm btn-outline-primary"}," Track ",8,Tt)])]))),128))])])])]))])])])])]),s.value?(d(),i("div",{key:0,class:h(["modal fade",{show:s.value}]),style:{display:"block"}},[e("div",Ut,[e("div",Vt,[e("div",Ft,[l[17]||(l[17]=e("h5",{class:"modal-title"},"Create New Order",-1)),e("button",{type:"button",class:"btn-close",onClick:l[2]||(l[2]=u=>s.value=!1)})]),e("div",It,[V(pe,{onOrderCreated:c,onCancel:l[3]||(l[3]=u=>s.value=!1)})])])])],2)):v("",!0),s.value?(d(),i("div",Nt)):v("",!0),b.value?(d(),i("div",{key:2,class:h(["modal fade",{show:b.value}]),style:{display:"block"}},[e("div",Mt,[e("div",qt,[e("div",At,[l[18]||(l[18]=e("h5",{class:"modal-title"},"Track Order",-1)),e("button",{type:"button",class:"btn-close",onClick:l[4]||(l[4]=u=>b.value=!1)})]),e("div",Lt,[V(Ge,{onClose:l[5]||(l[5]=u=>b.value=!1)})])])])],2)):v("",!0),b.value?(d(),i("div",Bt)):v("",!0)]))}},zt=O(Et,[["__scopeId","data-v-fee72bfd"]]);export{zt as default};
