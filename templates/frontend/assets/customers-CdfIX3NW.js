import{a}from"./index-CYFIV7Ul.js";const r=a.create({baseURL:"http://localhost:8000/api",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{const t=localStorage.getItem("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));r.interceptors.response.use(e=>e,async e=>{const t=e.config;if(e.response?.status===401&&!t._retry){t._retry=!0;try{const o=localStorage.getItem("refresh_token"),s=await a.post("http://localhost:8000/api/token/refresh/",{refresh:o});return localStorage.setItem("access_token",s.data.access),r.defaults.headers.common.Authorization=`Bearer ${s.data.access}`,t.headers.Authorization=`Bearer ${s.data.access}`,r(t)}catch(o){return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/customer-login",Promise.reject(o)}}return Promise.reject(e)});const n={register(e){return r.post("/customer/register/",e)},getPortal(){return r.get("/customer/portal/")},createOrder(e){return r.post("/customer/portal/",e)},trackOrder(e){return r.get("/customer/track/",{params:{tracking_number:e}})},getOrder(e){return r.get(`/deliveries/${e}/`)},getOrders(){return r.get("/customer/portal/")}};export{n as c};
