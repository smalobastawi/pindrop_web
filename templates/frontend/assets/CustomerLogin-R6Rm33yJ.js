import{r as m,l as g,e as n,f as e,C as w,k as u,D as p,E as v,H as h,i as d,h as y,w as k,g as x,u as C,o as c}from"./vendor-D1ADADCB.js";import{_ as L,a as V,l as _}from"./index-CYFIV7Ul.js";import"./ui-D_DTyfBr.js";const D={class:"container mt-5"},N={class:"row justify-content-center"},S={class:"col-md-6 col-lg-4"},B={class:"card shadow"},E={class:"card-body"},I={class:"mb-3"},q={class:"mb-3"},M={key:0,class:"alert alert-danger"},P={class:"d-grid"},R=["disabled"],T={key:0,class:"spinner-border spinner-border-sm me-2"},U={class:"text-center mt-3"},j={__name:"CustomerLogin",setup(H){const f=C(),a=m(!1),o=m(""),t=g({email:"",password:""}),b=async()=>{o.value="",a.value=!0;try{const r=await V.post("http://localhost:8000/api/token/",{email:t.email,password:t.password}),{access:s,refresh:l}=r.data;localStorage.setItem("access_token",s),localStorage.setItem("refresh_token",l),_.success("Login successful!"),f.push("/customer-portal")}catch(r){o.value=r.response?.data?.detail||"Login failed. Please check your credentials.",_.error(o.value)}finally{a.value=!1}};return(r,s)=>{const l=x("router-link");return c(),n("div",D,[e("div",N,[e("div",S,[e("div",B,[s[7]||(s[7]=e("div",{class:"card-header bg-primary text-white"},[e("h4",{class:"mb-0"},"Customer Login")],-1)),e("div",E,[e("form",{onSubmit:w(b,["prevent"])},[e("div",I,[s[2]||(s[2]=e("label",{for:"email",class:"form-label"},"Email",-1)),p(e("input",{type:"email",class:"form-control",id:"email","onUpdate:modelValue":s[0]||(s[0]=i=>t.email=i),required:""},null,512),[[v,t.email]])]),e("div",q,[s[3]||(s[3]=e("label",{for:"password",class:"form-label"},"Password",-1)),p(e("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":s[1]||(s[1]=i=>t.password=i),required:""},null,512),[[v,t.password]])]),o.value?(c(),n("div",M,h(o.value),1)):u("",!0),e("div",P,[e("button",{type:"submit",class:"btn btn-primary",disabled:a.value},[a.value?(c(),n("span",T)):u("",!0),s[4]||(s[4]=d(" Login ",-1))],8,R)])],32),e("div",U,[e("p",null,[s[6]||(s[6]=d("Don't have an account? ",-1)),y(l,{to:"/customer-register",class:"text-decoration-none"},{default:k(()=>[...s[5]||(s[5]=[d(" Register here ",-1)])]),_:1})])])])])])])])}}},G=L(j,[["__scopeId","data-v-c0686223"]]);export{G as default};
