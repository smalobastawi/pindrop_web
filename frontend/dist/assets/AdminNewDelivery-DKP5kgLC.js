import{r as m,s as q,k as A,w as k,u as S,g as x,o as d,f as l,e as p,h as V,K as C,L as t,M as a,i as v,N as c,O as f,F as P,I as N,H as b,j as w}from"./vendor-CVqOb0XR.js";import{A as E}from"./AdminLayout-Cny3dS76.js";import{_ as R,u as M}from"./index-Ba6kPx5P.js";import{A as y}from"./AddressSelector-Dx9xc_ZG.js";import"./ui-D_DTyfBr.js";const B={class:"admin-new-delivery"},F={class:"row"},T={class:"col-md-8"},j={class:"card"},O={class:"card-body"},I={class:"mb-4"},L={class:"row mb-3"},W={class:"col-md-6"},z={class:"col-md-6"},H={class:"row mb-3"},$={class:"col-md-6"},J={class:"col-md-6"},K={class:"mb-4"},G={class:"row mb-3"},Q={class:"col-md-6"},X={class:"col-md-6"},Y={class:"mb-3"},Z={class:"mb-4"},ee={class:"row mb-3"},le={class:"col-md-8"},se={class:"col-md-4"},oe={class:"row mb-3"},te={class:"col-md-4"},ae={class:"col-md-4"},ie={class:"col-md-4"},re={class:"row mb-3"},de={class:"col-md-4"},ne={class:"col-md-4"},ue={class:"col-md-4"},me={class:"row mb-3"},pe={class:"col-md-4"},ve={class:"form-check"},ce={class:"col-md-4"},be={class:"form-check"},fe={class:"col-md-4"},ye={class:"form-check"},_e={class:"mb-4"},ge={class:"mb-3"},ke={class:"mb-3"},Ve={class:"row mb-3"},we={class:"col-md-6"},Ue={class:"col-md-6"},he={class:"row mb-3"},De={class:"col-md-6"},qe={class:"col-md-6"},Ae={class:"mb-4"},Se={class:"row mb-3"},xe={class:"col-md-6"},Ce={class:"col-md-6"},Pe={class:"mb-3"},Ne={class:"mb-4"},Ee={class:"mb-3"},Re=["value"],Me={class:"d-grid gap-2 d-md-flex justify-content-md-end"},Be=["disabled"],Fe={key:0,class:"spinner-border spinner-border-sm",role:"status"},Te={key:0,class:"alert alert-danger mt-3"},je={__name:"AdminNewDelivery",setup(Oe){const U=S(),_=M(),o=m({sender_name:"",sender_phone:"",sender_email:"",sender_address:"",recipient_name:"",recipient_phone:"",recipient_address:"",package_description:"",package_weight:"",package_length:null,package_width:null,package_height:null,package_type:"",declared_value:0,special_instructions:"",is_fragile:!1,is_perishable:!1,requires_signature:!1,pickup_address:"",delivery_address:"",estimated_pickup:"",estimated_delivery:"",priority:1,delivery_fee:"",payment_amount:"",payment_method:"cash",cod_amount:0,rider_id:null}),n=m(!1),r=m(""),g=m([]),h=async()=>{try{const i=await fetch("/admin-api/api/riders/active_riders/",{headers:{Authorization:`Bearer ${_.token}`,"Content-Type":"application/json"}});if(i.ok){const e=await i.json();g.value=e.riders||[]}}catch(i){console.error("Error fetching riders:",i)}},D=async()=>{try{n.value=!0,r.value="";const i={...o.value};i.rider_id===""&&(i.rider_id=null);const e=await fetch("/admin-api/api/deliveries/",{method:"POST",headers:{Authorization:`Bearer ${_.token}`,"Content-Type":"application/json"},body:JSON.stringify(i)});if(e.ok){const u=await e.json();alert("Delivery created successfully!"),U.push("/admin/deliveries")}else{const u=await e.json();r.value=u.error||"Failed to create delivery. Please try again."}}catch(i){r.value="Failed to create delivery. Please try again.",console.error("Create delivery error:",i)}finally{n.value=!1}};return q(()=>{h()}),(i,e)=>{const u=x("router-link");return d(),A(E,null,{default:k(()=>[l("div",B,[e[66]||(e[66]=l("div",{class:"page-header"},[l("h1",null,"Create New Delivery"),l("p",null,"Enter sender and recipient details to create a new delivery order")],-1)),l("div",F,[l("div",T,[l("div",j,[e[65]||(e[65]=l("div",{class:"card-header"},[l("h5",null,"Delivery Information")],-1)),l("div",O,[l("form",{onSubmit:C(D,["prevent"])},[l("div",I,[e[31]||(e[31]=l("h6",{class:"section-title"},"Sender Details",-1)),l("div",L,[l("div",W,[e[28]||(e[28]=l("label",{class:"form-label"},"Sender Name *",-1)),t(l("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.sender_name=s),type:"text",class:"form-control",required:""},null,512),[[a,o.value.sender_name]])]),l("div",z,[e[29]||(e[29]=l("label",{class:"form-label"},"Sender Phone *",-1)),t(l("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.sender_phone=s),type:"tel",class:"form-control",required:""},null,512),[[a,o.value.sender_phone]])])]),l("div",H,[l("div",$,[e[30]||(e[30]=l("label",{class:"form-label"},"Sender Email",-1)),t(l("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.sender_email=s),type:"email",class:"form-control"},null,512),[[a,o.value.sender_email]])]),l("div",J,[v(y,{modelValue:o.value.sender_address,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.sender_address=s),label:"Sender Address *",placeholder:"Search for sender location...","address-placeholder":"Street, City, Country",rows:1,required:""},null,8,["modelValue"])])])]),l("div",K,[e[35]||(e[35]=l("h6",{class:"section-title"},"Recipient Details",-1)),l("div",G,[l("div",Q,[e[32]||(e[32]=l("label",{class:"form-label"},"Recipient Name *",-1)),t(l("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.recipient_name=s),type:"text",class:"form-control",required:""},null,512),[[a,o.value.recipient_name]])]),l("div",X,[e[33]||(e[33]=l("label",{class:"form-label"},"Recipient Phone *",-1)),t(l("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.recipient_phone=s),type:"tel",class:"form-control",required:""},null,512),[[a,o.value.recipient_phone]])])]),l("div",Y,[e[34]||(e[34]=l("label",{class:"form-label"},"Recipient Address *",-1)),t(l("textarea",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.value.recipient_address=s),class:"form-control",rows:"2",required:""},null,512),[[a,o.value.recipient_address]])])]),l("div",Z,[e[48]||(e[48]=l("h6",{class:"section-title"},"Package Details",-1)),l("div",ee,[l("div",le,[e[36]||(e[36]=l("label",{class:"form-label"},"Description *",-1)),t(l("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>o.value.package_description=s),type:"text",class:"form-control",required:""},null,512),[[a,o.value.package_description]])]),l("div",se,[e[38]||(e[38]=l("label",{class:"form-label"},"Type *",-1)),t(l("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.value.package_type=s),class:"form-select",required:""},[...e[37]||(e[37]=[l("option",{value:""},"Select Type",-1),l("option",{value:"document"},"Document",-1),l("option",{value:"parcel"},"Parcel",-1),l("option",{value:"fragile"},"Fragile",-1),l("option",{value:"perishable"},"Perishable",-1),l("option",{value:"electronic"},"Electronic",-1),l("option",{value:"clothing"},"Clothing",-1),l("option",{value:"food"},"Food",-1),l("option",{value:"other"},"Other",-1)])],512),[[c,o.value.package_type]])])]),l("div",oe,[l("div",te,[e[39]||(e[39]=l("label",{class:"form-label"},"Weight (kg) *",-1)),t(l("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>o.value.package_weight=s),type:"number",step:"0.1",class:"form-control",required:""},null,512),[[a,o.value.package_weight,void 0,{number:!0}]])]),l("div",ae,[e[40]||(e[40]=l("label",{class:"form-label"},"Length (cm)",-1)),t(l("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>o.value.package_length=s),type:"number",step:"0.1",class:"form-control"},null,512),[[a,o.value.package_length,void 0,{number:!0}]])]),l("div",ie,[e[41]||(e[41]=l("label",{class:"form-label"},"Width (cm)",-1)),t(l("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>o.value.package_width=s),type:"number",step:"0.1",class:"form-control"},null,512),[[a,o.value.package_width,void 0,{number:!0}]])])]),l("div",re,[l("div",de,[e[42]||(e[42]=l("label",{class:"form-label"},"Height (cm)",-1)),t(l("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>o.value.package_height=s),type:"number",step:"0.1",class:"form-control"},null,512),[[a,o.value.package_height,void 0,{number:!0}]])]),l("div",ne,[e[43]||(e[43]=l("label",{class:"form-label"},"Declared Value",-1)),t(l("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>o.value.declared_value=s),type:"number",step:"0.01",class:"form-control"},null,512),[[a,o.value.declared_value,void 0,{number:!0}]])]),l("div",ue,[e[44]||(e[44]=l("label",{class:"form-label"},"Special Instructions",-1)),t(l("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>o.value.special_instructions=s),type:"text",class:"form-control"},null,512),[[a,o.value.special_instructions]])])]),l("div",me,[l("div",pe,[l("div",ve,[t(l("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>o.value.is_fragile=s),class:"form-check-input",type:"checkbox",id:"is_fragile"},null,512),[[f,o.value.is_fragile]]),e[45]||(e[45]=l("label",{class:"form-check-label",for:"is_fragile"},"Fragile",-1))])]),l("div",ce,[l("div",be,[t(l("input",{"onUpdate:modelValue":e[16]||(e[16]=s=>o.value.is_perishable=s),class:"form-check-input",type:"checkbox",id:"is_perishable"},null,512),[[f,o.value.is_perishable]]),e[46]||(e[46]=l("label",{class:"form-check-label",for:"is_perishable"},"Perishable",-1))])]),l("div",fe,[l("div",ye,[t(l("input",{"onUpdate:modelValue":e[17]||(e[17]=s=>o.value.requires_signature=s),class:"form-check-input",type:"checkbox",id:"requires_signature"},null,512),[[f,o.value.requires_signature]]),e[47]||(e[47]=l("label",{class:"form-check-label",for:"requires_signature"},"Requires Signature",-1))])])])]),l("div",_e,[e[54]||(e[54]=l("h6",{class:"section-title"},"Delivery Details",-1)),l("div",ge,[v(y,{modelValue:o.value.pickup_address,"onUpdate:modelValue":e[18]||(e[18]=s=>o.value.pickup_address=s),label:"Pickup Address *",placeholder:"Search for pickup location...","address-placeholder":"Enter or select pickup address",required:""},null,8,["modelValue"])]),l("div",ke,[v(y,{modelValue:o.value.delivery_address,"onUpdate:modelValue":e[19]||(e[19]=s=>o.value.delivery_address=s),label:"Delivery Address *",placeholder:"Search for delivery location...","address-placeholder":"Enter or select delivery address",required:""},null,8,["modelValue"])]),l("div",Ve,[l("div",we,[e[49]||(e[49]=l("label",{class:"form-label"},"Estimated Pickup *",-1)),t(l("input",{"onUpdate:modelValue":e[20]||(e[20]=s=>o.value.estimated_pickup=s),type:"datetime-local",class:"form-control",required:""},null,512),[[a,o.value.estimated_pickup]])]),l("div",Ue,[e[50]||(e[50]=l("label",{class:"form-label"},"Estimated Delivery *",-1)),t(l("input",{"onUpdate:modelValue":e[21]||(e[21]=s=>o.value.estimated_delivery=s),type:"datetime-local",class:"form-control",required:""},null,512),[[a,o.value.estimated_delivery]])])]),l("div",he,[l("div",De,[e[52]||(e[52]=l("label",{class:"form-label"},"Priority *",-1)),t(l("select",{"onUpdate:modelValue":e[22]||(e[22]=s=>o.value.priority=s),class:"form-select",required:""},[...e[51]||(e[51]=[l("option",{value:1},"Normal (24-48 hours)",-1),l("option",{value:2},"Express (12-24 hours)",-1),l("option",{value:3},"Urgent (2-6 hours)",-1),l("option",{value:4},"Same Day (1-2 hours)",-1)])],512),[[c,o.value.priority]])]),l("div",qe,[e[53]||(e[53]=l("label",{class:"form-label"},"Delivery Fee *",-1)),t(l("input",{"onUpdate:modelValue":e[23]||(e[23]=s=>o.value.delivery_fee=s),type:"number",step:"0.01",class:"form-control",required:""},null,512),[[a,o.value.delivery_fee,void 0,{number:!0}]])])])]),l("div",Ae,[e[59]||(e[59]=l("h6",{class:"section-title"},"Payment Details",-1)),l("div",Se,[l("div",xe,[e[55]||(e[55]=l("label",{class:"form-label"},"Payment Amount *",-1)),t(l("input",{"onUpdate:modelValue":e[24]||(e[24]=s=>o.value.payment_amount=s),type:"number",step:"0.01",class:"form-control",required:""},null,512),[[a,o.value.payment_amount,void 0,{number:!0}]])]),l("div",Ce,[e[57]||(e[57]=l("label",{class:"form-label"},"Payment Method *",-1)),t(l("select",{"onUpdate:modelValue":e[25]||(e[25]=s=>o.value.payment_method=s),class:"form-select",required:""},[...e[56]||(e[56]=[l("option",{value:"cash"},"Cash on Delivery",-1),l("option",{value:"card"},"Credit/Debit Card",-1),l("option",{value:"bank"},"Bank Transfer",-1),l("option",{value:"mobile"},"Mobile Money",-1),l("option",{value:"wallet"},"Wallet Balance",-1)])],512),[[c,o.value.payment_method]])])]),l("div",Pe,[e[58]||(e[58]=l("label",{class:"form-label"},"COD Amount",-1)),t(l("input",{"onUpdate:modelValue":e[26]||(e[26]=s=>o.value.cod_amount=s),type:"number",step:"0.01",class:"form-control"},null,512),[[a,o.value.cod_amount,void 0,{number:!0}]])])]),l("div",Ne,[e[62]||(e[62]=l("h6",{class:"section-title"},"Rider Assignment (Optional)",-1)),l("div",Ee,[e[61]||(e[61]=l("label",{class:"form-label"},"Assign to Rider",-1)),t(l("select",{"onUpdate:modelValue":e[27]||(e[27]=s=>o.value.rider_id=s),class:"form-select"},[e[60]||(e[60]=l("option",{value:""},"Unassigned",-1)),(d(!0),p(P,null,N(g.value,s=>(d(),p("option",{key:s.id,value:s.id},b(s.name)+" ("+b(s.vehicle_type)+" - "+b(s.vehicle_plate)+") ",9,Re))),128))],512),[[c,o.value.rider_id]])])]),l("div",Me,[v(u,{to:"/admin/deliveries",class:"btn btn-outline-secondary me-md-2"},{default:k(()=>[...e[63]||(e[63]=[w(" Cancel ",-1)])]),_:1}),l("button",{type:"submit",class:"btn btn-primary",disabled:n.value},[n.value?(d(),p("span",Fe)):V("",!0),e[64]||(e[64]=w(" Create Delivery ",-1))],8,Be)])],32),r.value?(d(),p("div",Te,b(r.value),1)):V("",!0)])])])])])]),_:1})}}},$e=R(je,[["__scopeId","data-v-33d07a6e"]]);export{$e as default};
