import{r as f,l as w,e as c,i as d,f as s,h as v,K as x,L as u,M as g,O as C,j as b,S as L,H as S,w as V,g as G,u as I,o as m}from"./vendor-CVqOb0XR.js";import{_ as M,o as N,a as _,l as i}from"./index-Ba6kPx5P.js";import{C as R,a as U}from"./CommonFooter-B2JgU46h.js";import"./ui-D_DTyfBr.js";const B={class:"container",style:{"margin-top":"100px"}},D={class:"row justify-content-center"},E={class:"col-md-6"},j={class:"card"},q={class:"card-body"},H={class:"mb-3"},O={class:"mb-3"},P={class:"mb-3 form-check"},T=["disabled"],$={key:0,class:"spinner-border spinner-border-sm",role:"status"},F={class:"mt-3 text-center"},K={key:0,class:"alert alert-danger mt-3"},z={class:"mt-3 text-center"},A={class:"mt-2 text-center"},J={__name:"CustomerLogin",setup(Q){const p=I(),n=f(!1),t=f(""),r=w({username:"",password:"",remember:!1}),y=async()=>{t.value="",n.value=!0;try{const o=await _.post("/api/token/",{username:r.username,password:r.password}),{access:e,refresh:l}=o.data;localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",l),i.success("Login successful!"),p.push("/customer-portal")}catch(o){t.value=o.response?.data?.detail||"Login failed. Please check your credentials.",i.error(t.value)}finally{n.value=!1}},h=async o=>{t.value="",n.value=!0;try{const e=await _.post("/api/google-login/",{credential:o.credential}),{access:l,refresh:a}=e.data;localStorage.setItem("access_token",l),localStorage.setItem("refresh_token",a),i.success("Login successful!"),p.push("/customer-portal")}catch(e){t.value=e.response?.data?.detail||"Google login failed.",i.error(t.value)}finally{n.value=!1}},k=o=>{console.error("Google login error:",o),i.error("Google login failed.")};return(o,e)=>{const l=G("router-link");return m(),c("div",null,[d(R),s("div",B,[s("div",D,[s("div",E,[s("div",j,[e[10]||(e[10]=s("div",{class:"card-header"},[s("h3",{class:"text-center"},"Customer Login")],-1)),s("div",q,[s("form",{onSubmit:x(y,["prevent"])},[s("div",H,[e[4]||(e[4]=s("label",{for:"username",class:"form-label"},"Username",-1)),u(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>r.username=a),type:"text",class:"form-control",id:"username",required:""},null,512),[[g,r.username]])]),s("div",O,[e[5]||(e[5]=s("label",{for:"password",class:"form-label"},"Password",-1)),u(s("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>r.password=a),type:"password",class:"form-control",id:"password",required:""},null,512),[[g,r.password]])]),s("div",P,[u(s("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>r.remember=a),type:"checkbox",class:"form-check-input",id:"remember"},null,512),[[C,r.remember]]),e[6]||(e[6]=s("label",{class:"form-check-label",for:"remember"}," Remember me ",-1))]),s("button",{type:"submit",class:"btn btn-primary w-100",disabled:n.value},[n.value?(m(),c("span",$)):v("",!0),e[7]||(e[7]=b(" Login ",-1))],8,T)],32),s("div",F,[e[8]||(e[8]=s("p",null,"Or",-1)),d(L(N),{onSuccess:h,onError:k})]),t.value?(m(),c("div",K,S(t.value),1)):v("",!0),s("div",z,[d(l,{to:"/customer-portal/register",class:"text-decoration-none"},{default:V(()=>[...e[9]||(e[9]=[b(" Don't have an account? Register as Customer ",-1)])]),_:1})]),s("div",A,[s("button",{onClick:e[3]||(e[3]=a=>o.$router.push("/rider-login")),class:"btn btn-outline-primary"}," Rider Login ")])])])])]),d(U)])])}}},ee=M(J,[["__scopeId","data-v-aa411deb"]]);export{ee as default};
