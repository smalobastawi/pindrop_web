import{j as M,w as C,r as _,s as U,g as Y,o as r,f as e,e as m,F as V,K as T,I as S,D,k as f,E as n,G as l,M as b,i as d,J as p}from"./vendor-CbvXNS-i.js";import{A}from"./AdminLayout-CM_OGgUk.js";import{_ as q,a as y}from"./index--w8yyAH4.js";import"./adminAuth-DjiH6aaA.js";import"./ui-D_DTyfBr.js";const P={name:"AdminSettings",components:{AdminLayout:A},setup(){const k=_("general"),t=_(!1),u=_({site_name:"RiderApp Delivery",site_description:"Fast and reliable delivery service",contact_email:"support@pindrop.com",contact_phone:"+1-555-0123",timezone:"UTC",date_format:"MM/DD/YYYY",base_delivery_fee:"5.00",fee_per_km:"0.50",max_delivery_distance:"50",default_delivery_time:"2",allow_scheduled_deliveries:!0,require_signature:!1,email_notifications_enabled:!0,smtp_host:"smtp.gmail.com",smtp_port:"587",smtp_username:"",smtp_password:"",sms_notifications_enabled:!1,session_timeout:"60",max_login_attempts:"5",lockout_duration:"30",require_password_change:!1,enable_two_factor:!1,log_admin_actions:!0,auto_backup_enabled:!1,backup_frequency:"daily",backup_retention:"30",backup_location:"/backups/"}),s=[{key:"general",name:"General",icon:"icon-settings"},{key:"delivery",name:"Delivery",icon:"icon-truck"},{key:"notifications",name:"Notifications",icon:"icon-mail"},{key:"security",name:"Security",icon:"icon-shield"},{key:"backup",name:"Backup",icon:"icon-database"}],c=async()=>{try{const o=await y.get("/admin-api/settings/"),a=o.data.results||o.data;a.length>0&&a.forEach(g=>{u.value.hasOwnProperty(g.key)&&(u.value[g.key]=g.value)})}catch(o){console.error("Failed to load settings:",o)}},x=async()=>{t.value=!0;try{const o=[];Object.keys(u.value).forEach(a=>{o.push({key:a,value:u.value[a].toString(),setting_type:i(u.value[a]),category:w(a)})});for(const a of o)try{await y.post("/admin-api/settings/",a)}catch(g){if(g.response?.status===400)await y.put(`/admin-api/settings/${a.key}/`,a);else throw g}alert("Settings saved successfully!")}catch(o){console.error("Failed to save settings:",o),alert("Failed to save settings. Please try again.")}finally{t.value=!1}},v=()=>{confirm("Are you sure you want to reset all settings to default values?")&&(u.value={site_name:"RiderApp Delivery",site_description:"Fast and reliable delivery service",contact_email:"support@pindrop.com",contact_phone:"+1-555-0123",timezone:"UTC",date_format:"MM/DD/YYYY",base_delivery_fee:"5.00",fee_per_km:"0.50",max_delivery_distance:"50",default_delivery_time:"2",allow_scheduled_deliveries:!0,require_signature:!1,email_notifications_enabled:!0,smtp_host:"smtp.gmail.com",smtp_port:"587",smtp_username:"",smtp_password:"",sms_notifications_enabled:!1,session_timeout:"60",max_login_attempts:"5",lockout_duration:"30",require_password_change:!1,enable_two_factor:!1,log_admin_actions:!0,auto_backup_enabled:!1,backup_frequency:"daily",backup_retention:"30",backup_location:"/backups/"})},i=o=>typeof o=="boolean"?"boolean":isNaN(Number(o))?"string":"float",w=o=>["site_name","site_description","contact_email","contact_phone","timezone","date_format"].includes(o)?"general":["base_delivery_fee","fee_per_km","max_delivery_distance","default_delivery_time","allow_scheduled_deliveries","require_signature"].includes(o)?"delivery":["email_notifications_enabled","smtp_host","smtp_port","smtp_username","smtp_password","sms_notifications_enabled"].includes(o)?"notifications":["session_timeout","max_login_attempts","lockout_duration","require_password_change","enable_two_factor","log_admin_actions"].includes(o)?"security":["auto_backup_enabled","backup_frequency","backup_retention","backup_location"].includes(o)?"backup":"general";return U(()=>{c()}),{activeCategory:k,settings:u,settingCategories:s,saving:t,saveSettings:x,resetToDefaults:v}}},E={class:"admin-settings"},B={class:"settings-container"},F={class:"settings-sidebar"},L={class:"settings-nav"},N=["onClick"],z={class:"settings-content"},R={key:0,class:"settings-section"},G={class:"settings-grid"},H={class:"setting-item"},K={class:"setting-item"},j={class:"setting-item"},I={class:"setting-item"},O={class:"setting-item"},J={class:"setting-item"},W={key:1,class:"settings-section"},Q={class:"settings-grid"},X={class:"setting-item"},Z={class:"input-group"},h={class:"setting-item"},$={class:"input-group"},tt={class:"setting-item"},et={class:"input-group"},st={class:"setting-item"},it={class:"input-group"},nt={class:"setting-item"},ot={class:"checkbox-wrapper"},lt={class:"setting-item"},at={class:"checkbox-wrapper"},rt={key:2,class:"settings-section"},dt={class:"settings-grid"},ut={class:"setting-item"},mt={class:"checkbox-wrapper"},pt={class:"setting-item"},gt={class:"setting-item"},ft={class:"setting-item"},vt={class:"setting-item"},_t={class:"setting-item"},bt={class:"checkbox-wrapper"},yt={key:3,class:"settings-section"},kt={class:"settings-grid"},ct={class:"setting-item"},xt={class:"input-group"},wt={class:"setting-item"},St={class:"setting-item"},Dt={class:"input-group"},Mt={class:"setting-item"},Ct={class:"checkbox-wrapper"},Ut={class:"setting-item"},Yt={class:"checkbox-wrapper"},Vt={class:"setting-item"},Tt={class:"checkbox-wrapper"},At={key:4,class:"settings-section"},qt={class:"settings-grid"},Pt={class:"setting-item"},Et={class:"checkbox-wrapper"},Bt={class:"setting-item"},Ft={class:"setting-item"},Lt={class:"input-group"},Nt={class:"setting-item"},zt={class:"settings-footer"},Rt=["disabled"],Gt={key:0,class:"loading-spinner"},Ht=["disabled"];function Kt(k,t,u,s,c,x){const v=Y("AdminLayout");return r(),M(v,null,{default:C(()=>[e("div",E,[t[109]||(t[109]=e("div",{class:"page-header"},[e("h1",null,"System Settings"),e("p",null,"Configure system-wide settings and preferences")],-1)),e("div",B,[e("div",F,[e("nav",L,[(r(!0),m(V,null,T(s.settingCategories,i=>(r(),m("button",{key:i.key,onClick:w=>s.activeCategory=i.key,class:S(["nav-item",{active:s.activeCategory===i.key}])},[e("i",{class:S(i.icon)},null,2),e("span",null,D(i.name),1)],10,N))),128))])]),e("div",z,[s.activeCategory==="general"?(r(),m("div",R,[t[44]||(t[44]=e("div",{class:"section-header"},[e("h2",null,"General Settings"),e("p",null,"Basic system configuration")],-1)),e("div",G,[e("div",H,[t[30]||(t[30]=e("label",{for:"site_name"},"Site Name",-1)),n(e("input",{id:"site_name","onUpdate:modelValue":t[0]||(t[0]=i=>s.settings.site_name=i),type:"text",placeholder:"Enter site name"},null,512),[[l,s.settings.site_name]]),t[31]||(t[31]=e("small",null,"The name of your delivery service",-1))]),e("div",K,[t[32]||(t[32]=e("label",{for:"site_description"},"Site Description",-1)),n(e("textarea",{id:"site_description","onUpdate:modelValue":t[1]||(t[1]=i=>s.settings.site_description=i),rows:"3",placeholder:"Enter site description"},null,512),[[l,s.settings.site_description]]),t[33]||(t[33]=e("small",null,"Brief description of your service",-1))]),e("div",j,[t[34]||(t[34]=e("label",{for:"contact_email"},"Contact Email",-1)),n(e("input",{id:"contact_email","onUpdate:modelValue":t[2]||(t[2]=i=>s.settings.contact_email=i),type:"email",placeholder:"Enter contact email"},null,512),[[l,s.settings.contact_email]]),t[35]||(t[35]=e("small",null,"Primary contact email for customer support",-1))]),e("div",I,[t[36]||(t[36]=e("label",{for:"contact_phone"},"Contact Phone",-1)),n(e("input",{id:"contact_phone","onUpdate:modelValue":t[3]||(t[3]=i=>s.settings.contact_phone=i),type:"tel",placeholder:"Enter contact phone"},null,512),[[l,s.settings.contact_phone]]),t[37]||(t[37]=e("small",null,"Primary contact phone number",-1))]),e("div",O,[t[39]||(t[39]=e("label",{for:"timezone"},"Timezone",-1)),n(e("select",{id:"timezone","onUpdate:modelValue":t[4]||(t[4]=i=>s.settings.timezone=i)},[...t[38]||(t[38]=[e("option",{value:"UTC"},"UTC",-1),e("option",{value:"America/New_York"},"Eastern Time",-1),e("option",{value:"America/Chicago"},"Central Time",-1),e("option",{value:"America/Denver"},"Mountain Time",-1),e("option",{value:"America/Los_Angeles"},"Pacific Time",-1),e("option",{value:"Europe/London"},"London",-1),e("option",{value:"Europe/Paris"},"Paris",-1)])],512),[[b,s.settings.timezone]]),t[40]||(t[40]=e("small",null,"System timezone for date/time operations",-1))]),e("div",J,[t[42]||(t[42]=e("label",{for:"date_format"},"Date Format",-1)),n(e("select",{id:"date_format","onUpdate:modelValue":t[5]||(t[5]=i=>s.settings.date_format=i)},[...t[41]||(t[41]=[e("option",{value:"MM/DD/YYYY"},"MM/DD/YYYY",-1),e("option",{value:"DD/MM/YYYY"},"DD/MM/YYYY",-1),e("option",{value:"YYYY-MM-DD"},"YYYY-MM-DD",-1)])],512),[[b,s.settings.date_format]]),t[43]||(t[43]=e("small",null,"Default date format for displaying dates",-1))])])])):f("",!0),s.activeCategory==="delivery"?(r(),m("div",W,[t[63]||(t[63]=e("div",{class:"section-header"},[e("h2",null,"Delivery Settings"),e("p",null,"Configure delivery-related options")],-1)),e("div",Q,[e("div",X,[t[46]||(t[46]=e("label",{for:"base_delivery_fee"},"Base Delivery Fee",-1)),e("div",Z,[t[45]||(t[45]=e("span",{class:"input-prefix"},"$",-1)),n(e("input",{id:"base_delivery_fee","onUpdate:modelValue":t[6]||(t[6]=i=>s.settings.base_delivery_fee=i),type:"number",step:"0.01",min:"0",placeholder:"0.00"},null,512),[[l,s.settings.base_delivery_fee]])]),t[47]||(t[47]=e("small",null,"Base fee for all deliveries",-1))]),e("div",h,[t[49]||(t[49]=e("label",{for:"fee_per_km"},"Fee Per Kilometer",-1)),e("div",$,[t[48]||(t[48]=e("span",{class:"input-prefix"},"$",-1)),n(e("input",{id:"fee_per_km","onUpdate:modelValue":t[7]||(t[7]=i=>s.settings.fee_per_km=i),type:"number",step:"0.01",min:"0",placeholder:"0.00"},null,512),[[l,s.settings.fee_per_km]])]),t[50]||(t[50]=e("small",null,"Additional fee per kilometer",-1))]),e("div",tt,[t[52]||(t[52]=e("label",{for:"max_delivery_distance"},"Max Delivery Distance",-1)),e("div",et,[n(e("input",{id:"max_delivery_distance","onUpdate:modelValue":t[8]||(t[8]=i=>s.settings.max_delivery_distance=i),type:"number",min:"1",placeholder:"50"},null,512),[[l,s.settings.max_delivery_distance]]),t[51]||(t[51]=e("span",{class:"input-suffix"},"km",-1))]),t[53]||(t[53]=e("small",null,"Maximum distance for deliveries",-1))]),e("div",st,[t[55]||(t[55]=e("label",{for:"default_delivery_time"},"Default Delivery Time",-1)),e("div",it,[n(e("input",{id:"default_delivery_time","onUpdate:modelValue":t[9]||(t[9]=i=>s.settings.default_delivery_time=i),type:"number",min:"1",placeholder:"2"},null,512),[[l,s.settings.default_delivery_time]]),t[54]||(t[54]=e("span",{class:"input-suffix"},"hours",-1))]),t[56]||(t[56]=e("small",null,"Default estimated delivery time",-1))]),e("div",nt,[e("label",ot,[n(e("input",{"onUpdate:modelValue":t[10]||(t[10]=i=>s.settings.allow_scheduled_deliveries=i),type:"checkbox"},null,512),[[p,s.settings.allow_scheduled_deliveries]]),t[57]||(t[57]=e("span",{class:"checkmark"},null,-1)),t[58]||(t[58]=d(" Allow Scheduled Deliveries ",-1))]),t[59]||(t[59]=e("small",null,"Enable customers to schedule future deliveries",-1))]),e("div",lt,[e("label",at,[n(e("input",{"onUpdate:modelValue":t[11]||(t[11]=i=>s.settings.require_signature=i),type:"checkbox"},null,512),[[p,s.settings.require_signature]]),t[60]||(t[60]=e("span",{class:"checkmark"},null,-1)),t[61]||(t[61]=d(" Require Signature on Delivery ",-1))]),t[62]||(t[62]=e("small",null,"Require customer signature for delivery confirmation",-1))])])])):f("",!0),s.activeCategory==="notifications"?(r(),m("div",rt,[t[78]||(t[78]=e("div",{class:"section-header"},[e("h2",null,"Notification Settings"),e("p",null,"Configure email and SMS notifications")],-1)),e("div",dt,[e("div",ut,[e("label",mt,[n(e("input",{"onUpdate:modelValue":t[12]||(t[12]=i=>s.settings.email_notifications_enabled=i),type:"checkbox"},null,512),[[p,s.settings.email_notifications_enabled]]),t[64]||(t[64]=e("span",{class:"checkmark"},null,-1)),t[65]||(t[65]=d(" Enable Email Notifications ",-1))]),t[66]||(t[66]=e("small",null,"Send email notifications to customers",-1))]),e("div",pt,[t[67]||(t[67]=e("label",{for:"smtp_host"},"SMTP Host",-1)),n(e("input",{id:"smtp_host","onUpdate:modelValue":t[13]||(t[13]=i=>s.settings.smtp_host=i),type:"text",placeholder:"smtp.gmail.com"},null,512),[[l,s.settings.smtp_host]]),t[68]||(t[68]=e("small",null,"SMTP server for sending emails",-1))]),e("div",gt,[t[69]||(t[69]=e("label",{for:"smtp_port"},"SMTP Port",-1)),n(e("input",{id:"smtp_port","onUpdate:modelValue":t[14]||(t[14]=i=>s.settings.smtp_port=i),type:"number",placeholder:"587"},null,512),[[l,s.settings.smtp_port]]),t[70]||(t[70]=e("small",null,"SMTP server port",-1))]),e("div",ft,[t[71]||(t[71]=e("label",{for:"smtp_username"},"SMTP Username",-1)),n(e("input",{id:"smtp_username","onUpdate:modelValue":t[15]||(t[15]=i=>s.settings.smtp_username=i),type:"text",placeholder:"your-email@gmail.com"},null,512),[[l,s.settings.smtp_username]]),t[72]||(t[72]=e("small",null,"SMTP authentication username",-1))]),e("div",vt,[t[73]||(t[73]=e("label",{for:"smtp_password"},"SMTP Password",-1)),n(e("input",{id:"smtp_password","onUpdate:modelValue":t[16]||(t[16]=i=>s.settings.smtp_password=i),type:"password",placeholder:"Enter SMTP password"},null,512),[[l,s.settings.smtp_password]]),t[74]||(t[74]=e("small",null,"SMTP authentication password",-1))]),e("div",_t,[e("label",bt,[n(e("input",{"onUpdate:modelValue":t[17]||(t[17]=i=>s.settings.sms_notifications_enabled=i),type:"checkbox"},null,512),[[p,s.settings.sms_notifications_enabled]]),t[75]||(t[75]=e("span",{class:"checkmark"},null,-1)),t[76]||(t[76]=d(" Enable SMS Notifications ",-1))]),t[77]||(t[77]=e("small",null,"Send SMS notifications to customers",-1))])])])):f("",!0),s.activeCategory==="security"?(r(),m("div",yt,[t[96]||(t[96]=e("div",{class:"section-header"},[e("h2",null,"Security Settings"),e("p",null,"Configure security and access controls")],-1)),e("div",kt,[e("div",ct,[t[80]||(t[80]=e("label",{for:"session_timeout"},"Session Timeout",-1)),e("div",xt,[n(e("input",{id:"session_timeout","onUpdate:modelValue":t[18]||(t[18]=i=>s.settings.session_timeout=i),type:"number",min:"5",placeholder:"60"},null,512),[[l,s.settings.session_timeout]]),t[79]||(t[79]=e("span",{class:"input-suffix"},"minutes",-1))]),t[81]||(t[81]=e("small",null,"Automatically log out inactive users",-1))]),e("div",wt,[t[82]||(t[82]=e("label",{for:"max_login_attempts"},"Max Login Attempts",-1)),n(e("input",{id:"max_login_attempts","onUpdate:modelValue":t[19]||(t[19]=i=>s.settings.max_login_attempts=i),type:"number",min:"3",placeholder:"5"},null,512),[[l,s.settings.max_login_attempts]]),t[83]||(t[83]=e("small",null,"Maximum failed login attempts before account lockout",-1))]),e("div",St,[t[85]||(t[85]=e("label",{for:"lockout_duration"},"Account Lockout Duration",-1)),e("div",Dt,[n(e("input",{id:"lockout_duration","onUpdate:modelValue":t[20]||(t[20]=i=>s.settings.lockout_duration=i),type:"number",min:"5",placeholder:"30"},null,512),[[l,s.settings.lockout_duration]]),t[84]||(t[84]=e("span",{class:"input-suffix"},"minutes",-1))]),t[86]||(t[86]=e("small",null,"Duration to lock account after max failed attempts",-1))]),e("div",Mt,[e("label",Ct,[n(e("input",{"onUpdate:modelValue":t[21]||(t[21]=i=>s.settings.require_password_change=i),type:"checkbox"},null,512),[[p,s.settings.require_password_change]]),t[87]||(t[87]=e("span",{class:"checkmark"},null,-1)),t[88]||(t[88]=d(" Require Password Change Every 90 Days ",-1))]),t[89]||(t[89]=e("small",null,"Force users to change password regularly",-1))]),e("div",Ut,[e("label",Yt,[n(e("input",{"onUpdate:modelValue":t[22]||(t[22]=i=>s.settings.enable_two_factor=i),type:"checkbox"},null,512),[[p,s.settings.enable_two_factor]]),t[90]||(t[90]=e("span",{class:"checkmark"},null,-1)),t[91]||(t[91]=d(" Enable Two-Factor Authentication ",-1))]),t[92]||(t[92]=e("small",null,"Require 2FA for admin users",-1))]),e("div",Vt,[e("label",Tt,[n(e("input",{"onUpdate:modelValue":t[23]||(t[23]=i=>s.settings.log_admin_actions=i),type:"checkbox"},null,512),[[p,s.settings.log_admin_actions]]),t[93]||(t[93]=e("span",{class:"checkmark"},null,-1)),t[94]||(t[94]=d(" Log Admin Actions ",-1))]),t[95]||(t[95]=e("small",null,"Keep audit log of all admin actions",-1))])])])):f("",!0),s.activeCategory==="backup"?(r(),m("div",At,[t[108]||(t[108]=e("div",{class:"section-header"},[e("h2",null,"Backup Settings"),e("p",null,"Configure automatic backup options")],-1)),e("div",qt,[e("div",Pt,[e("label",Et,[n(e("input",{"onUpdate:modelValue":t[24]||(t[24]=i=>s.settings.auto_backup_enabled=i),type:"checkbox"},null,512),[[p,s.settings.auto_backup_enabled]]),t[97]||(t[97]=e("span",{class:"checkmark"},null,-1)),t[98]||(t[98]=d(" Enable Automatic Backups ",-1))]),t[99]||(t[99]=e("small",null,"Automatically create backups on schedule",-1))]),e("div",Bt,[t[101]||(t[101]=e("label",{for:"backup_frequency"},"Backup Frequency",-1)),n(e("select",{id:"backup_frequency","onUpdate:modelValue":t[25]||(t[25]=i=>s.settings.backup_frequency=i)},[...t[100]||(t[100]=[e("option",{value:"daily"},"Daily",-1),e("option",{value:"weekly"},"Weekly",-1),e("option",{value:"monthly"},"Monthly",-1)])],512),[[b,s.settings.backup_frequency]]),t[102]||(t[102]=e("small",null,"How often to create backups",-1))]),e("div",Ft,[t[104]||(t[104]=e("label",{for:"backup_retention"},"Backup Retention",-1)),e("div",Lt,[n(e("input",{id:"backup_retention","onUpdate:modelValue":t[26]||(t[26]=i=>s.settings.backup_retention=i),type:"number",min:"1",placeholder:"30"},null,512),[[l,s.settings.backup_retention]]),t[103]||(t[103]=e("span",{class:"input-suffix"},"days",-1))]),t[105]||(t[105]=e("small",null,"How long to keep backup files",-1))]),e("div",Nt,[t[106]||(t[106]=e("label",{for:"backup_location"},"Backup Storage Location",-1)),n(e("input",{id:"backup_location","onUpdate:modelValue":t[27]||(t[27]=i=>s.settings.backup_location=i),type:"text",placeholder:"/backups/"},null,512),[[l,s.settings.backup_location]]),t[107]||(t[107]=e("small",null,"Local path to store backup files",-1))])])])):f("",!0)])]),e("div",zt,[e("button",{onClick:t[28]||(t[28]=(...i)=>s.saveSettings&&s.saveSettings(...i)),class:"btn btn-primary",disabled:s.saving},[s.saving?(r(),m("span",Gt)):f("",!0),d(" "+D(s.saving?"Saving...":"Save Settings"),1)],8,Rt),e("button",{onClick:t[29]||(t[29]=(...i)=>s.resetToDefaults&&s.resetToDefaults(...i)),class:"btn btn-secondary",disabled:s.saving}," Reset to Defaults ",8,Ht)])])]),_:1})}const Qt=q(P,[["render",Kt],["__scopeId","data-v-76c4b6b2"]]);export{Qt as default};
