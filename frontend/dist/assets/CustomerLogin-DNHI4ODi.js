import{r as m,l as y,e as d,f as e,C as h,k as u,E as p,G as v,D as k,i as a,h as f,w as _,g as x,u as L,o as c}from"./vendor-CbvXNS-i.js";import{_ as C,a as V,l as b}from"./index--w8yyAH4.js";import"./ui-D_DTyfBr.js";const N={class:"container mt-5"},D={class:"row justify-content-center"},S={class:"col-md-6 col-lg-4"},B={class:"card shadow"},E={class:"card-body"},I={class:"mb-3"},U={class:"mb-3"},q={key:0,class:"alert alert-danger"},M={class:"d-grid"},P=["disabled"],R={key:0,class:"spinner-border spinner-border-sm me-2"},T={class:"text-center mt-3"},j={class:"small"},A={__name:"CustomerLogin",setup(G){const g=L(),r=m(!1),o=m(""),t=y({email:"",password:""}),w=async()=>{o.value="",r.value=!0;try{const l=await V.post("http://localhost:8000/api/token/",{email:t.email,password:t.password}),{access:s,refresh:i}=l.data;localStorage.setItem("access_token",s),localStorage.setItem("refresh_token",i),b.success("Login successful!"),g.push("/customer-portal")}catch(l){o.value=l.response?.data?.detail||"Login failed. Please check your credentials.",b.error(o.value)}finally{r.value=!1}};return(l,s)=>{const i=x("router-link");return c(),d("div",N,[e("div",D,[e("div",S,[e("div",B,[s[9]||(s[9]=e("div",{class:"card-header bg-primary text-white"},[e("h4",{class:"mb-0"},"User Login")],-1)),e("div",E,[e("form",{onSubmit:h(w,["prevent"])},[e("div",I,[s[2]||(s[2]=e("label",{for:"email",class:"form-label"},"Email",-1)),p(e("input",{type:"email",class:"form-control",id:"email","onUpdate:modelValue":s[0]||(s[0]=n=>t.email=n),required:""},null,512),[[v,t.email]])]),e("div",U,[s[3]||(s[3]=e("label",{for:"password",class:"form-label"},"Password",-1)),p(e("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":s[1]||(s[1]=n=>t.password=n),required:""},null,512),[[v,t.password]])]),o.value?(c(),d("div",q,k(o.value),1)):u("",!0),e("div",M,[e("button",{type:"submit",class:"btn btn-primary",disabled:r.value},[r.value?(c(),d("span",R)):u("",!0),s[4]||(s[4]=a(" Login ",-1))],8,P)])],32),e("div",T,[e("p",null,[s[6]||(s[6]=a("Don't have an account? ",-1)),f(i,{to:"/customer-register",class:"text-decoration-none"},{default:_(()=>[...s[5]||(s[5]=[a(" Register here ",-1)])]),_:1})]),e("p",j,[s[8]||(s[8]=a(" New rider? ",-1)),f(i,{to:"/customer-register",class:"text-decoration-none"},{default:_(()=>[...s[7]||(s[7]=[a(" Apply to become a rider ",-1)])]),_:1})])])])])])])])}}},J=C(A,[["__scopeId","data-v-5988aa3a"]]);export{J as default};
