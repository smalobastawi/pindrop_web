import{r as d,s as g,e as i,f as s,h as y,j as p,H as a,F as f,I as w,u as x,g as D,o as n,J as k,i as C,w as N}from"./vendor-CVqOb0XR.js";import{a as c,l as R}from"./index-Ba6kPx5P.js";import"./ui-D_DTyfBr.js";const T={class:"dashboard"},V={key:0,class:"alert alert-warning alert-dismissible fade show",role:"alert"},A={class:"row mb-4"},S={class:"col-md-3"},B={class:"card text-white bg-primary"},F={class:"card-body"},M={class:"card-text display-6"},P={class:"col-md-3"},E={class:"card text-white bg-success"},I={class:"card-body"},L={class:"card-text display-6"},Y={class:"col-md-3"},$={class:"card text-white bg-warning"},j={class:"card-body"},z={class:"card-text display-6"},H={class:"col-md-3"},J={class:"card text-white bg-info"},q={class:"card-body"},G={class:"card-text display-6"},K={class:"card"},O={class:"card-body"},Q={class:"table table-hover"},ss={__name:"Dashboard",setup(U){x();const l=d({}),u=d([]),_=d(""),v=d(""),m=async()=>{try{const[e,t,r]=await Promise.all([c.get("/api/dashboard/"),c.get("/deliveries/?limit=5"),c.get("/api/mobile/profile/")]);l.value=e.data,u.value=t.data.results,_.value=r.data.profile?.status||"",v.value=r.data.profile?.user_type||"customer"}catch(e){R.error("Failed to fetch dashboard data"),console.error("Dashboard error:",e)}},b=e=>e?new Date(e).toLocaleDateString():"N/A",h=e=>({pending:"secondary",assigned:"info",picked_up:"primary",in_transit:"warning",delivered:"success",failed:"danger",cancelled:"dark"})[e]||"secondary";return g(()=>{m()}),(e,t)=>{const r=D("router-link");return n(),i("div",T,[t[8]||(t[8]=s("h1",{class:"h2 mb-4"},"Dashboard",-1)),_.value==="pending_approval"?(n(),i("div",V,[...t[0]||(t[0]=[s("strong",null,"Account Pending Approval",-1),p(" Your rider account is currently under review. You will be notified once approved. ",-1),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1)])])):y("",!0),s("div",A,[s("div",S,[s("div",B,[s("div",F,[t[1]||(t[1]=s("h5",{class:"card-title"},"Total Deliveries",-1)),s("p",M,a(l.value.total||0),1)])])]),s("div",P,[s("div",E,[s("div",I,[t[2]||(t[2]=s("h5",{class:"card-title"},"Delivered",-1)),s("p",L,a(l.value.delivered||0),1)])])]),s("div",Y,[s("div",$,[s("div",j,[t[3]||(t[3]=s("h5",{class:"card-title"},"In Transit",-1)),s("p",z,a(l.value.in_transit||0),1)])])]),s("div",H,[s("div",J,[s("div",q,[t[4]||(t[4]=s("h5",{class:"card-title"},"Pending",-1)),s("p",G,a(l.value.pending||0),1)])])])]),s("div",K,[t[7]||(t[7]=s("div",{class:"card-header"},[s("h5",{class:"mb-0"},"Recent Deliveries")],-1)),s("div",O,[s("table",Q,[t[6]||(t[6]=s("thead",null,[s("tr",null,[s("th",null,"Tracking #"),s("th",null,"Customer"),s("th",null,"Status"),s("th",null,"Estimated Delivery"),s("th",null,"Actions")])],-1)),s("tbody",null,[(n(!0),i(f,null,w(u.value,o=>(n(),i("tr",{key:o.id},[s("td",null,a(o.tracking_number),1),s("td",null,a(o.customer?.name),1),s("td",null,[s("span",{class:k(`badge bg-${h(o.status)}`)},a(o.status),3)]),s("td",null,a(b(o.estimated_delivery)),1),s("td",null,[C(r,{to:`/deliveries/${o.id}`,class:"btn btn-sm btn-outline-primary"},{default:N(()=>[...t[5]||(t[5]=[p(" View ",-1)])]),_:1},8,["to"])])]))),128))])])])])])}}};export{ss as default};
