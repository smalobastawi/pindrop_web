import{e as m,i as c,f as o,g as b,K as x,L as s,M as i,h as P,N as y,P as g,F as V,r as v,u as h,o as u}from"./vendor-CVqOb0XR.js";import{_ as q,b as U,a as I}from"./index-Ba6kPx5P.js";import{a as T,C}from"./CommonFooter-B2JgU46h.js";import"./ui-D_DTyfBr.js";const D={components:{CommonHeader:C,CommonFooter:T},setup(){const f=h(),e=U(),d=v(!1),l=v(null),t=v({firstName:"",lastName:"",email:"",phone:"",address:"",identityType:"",identityNumber:"",identityDocument:null,licenseNumber:"",licenseExpiry:"",vehicleType:"",vehiclePlate:"",vehicleModel:"",vehicleColor:"",username:"",password:"",confirmPassword:""});return{form:t,loading:d,identityDocumentPreview:l,handleIdentityDocumentUpload:a=>{const r=a.target.files[0];if(r){t.value.identityDocument=r;const n=new FileReader;n.onload=N=>{l.value=N.target.result},n.readAsDataURL(r)}},registerRider:async()=>{if(!t.value.firstName.trim()){alert("First name is required!");return}if(!t.value.lastName.trim()){alert("Last name is required!");return}if(!t.value.email.trim()){alert("Email is required!");return}if(!t.value.phone.trim()){alert("Phone number is required!");return}if(!t.value.address.trim()){alert("Address is required!");return}if(!t.value.identityType){alert("Identity type is required!");return}if(!t.value.identityNumber.trim()){alert("Identity number is required!");return}if(!t.value.licenseNumber.trim()){alert("License number is required!");return}if(!t.value.vehicleType){alert("Vehicle type is required!");return}if(!t.value.vehiclePlate.trim()){alert("Vehicle plate number is required!");return}if(!t.value.username.trim()){alert("Username is required!");return}if(!t.value.password.trim()){alert("Password is required!");return}if(t.value.password!==t.value.confirmPassword){alert("Passwords do not match!");return}d.value=!0;try{const a={first_name:t.value.firstName,last_name:t.value.lastName,email:t.value.email,phone:t.value.phone,address:t.value.address,identity_type:t.value.identityType,identity_number:t.value.identityNumber,license_number:t.value.licenseNumber,license_expiry:t.value.licenseExpiry,vehicle_type:t.value.vehicleType,vehicle_plate:t.value.vehiclePlate,vehicle_model:t.value.vehicleModel,vehicle_color:t.value.vehicleColor,username:t.value.username,password:t.value.password},r=await e.registerRider(a);if(r.success)try{const n=await I.post("/api/token/",{username:t.email,password:t.password});localStorage.setItem("access_token",n.data.access),localStorage.setItem("refresh_token",n.data.refresh),alert("Rider registration successful! Your account is pending approval."),f.push("/dashboard")}catch(n){console.error("Auto-login failed:",n),alert("Rider registration successful! Please wait for admin approval before logging in."),f.push("/rider-login")}else alert("Registration failed: "+(r.message||"Unknown error"))}catch(a){console.error("Registration error:",a),alert("An error occurred during registration. Please try again.")}finally{d.value=!1}}}}},R={class:"registration-page"},k={class:"container mt-5"},M={class:"row justify-content-center"},E={class:"col-md-8"},L={class:"card shadow"},S={class:"card-body"},_={class:"mb-4"},F={class:"row mb-3"},A={class:"col-md-6"},B={class:"col-md-6"},H={class:"row mb-3"},j={class:"col-md-6"},Y={class:"col-md-6"},K={class:"mb-3"},O={class:"mb-4"},z={class:"row mb-3"},G={class:"col-md-6"},J={class:"col-md-6"},Q={class:"mb-3"},W={key:0,class:"mb-3"},X=["src"],Z={class:"mb-4"},$={class:"row mb-3"},ee={class:"col-md-6"},oe={class:"col-md-6"},le={class:"mb-4"},re={class:"row mb-3"},te={class:"col-md-6"},se={class:"col-md-6"},ie={class:"row mb-3"},ae={class:"col-md-6"},ne={class:"col-md-6"},de={class:"mb-4"},me={class:"row mb-3"},ue={class:"col-md-6"},fe={class:"col-md-6"},ve={class:"mb-3"},pe={class:"d-grid gap-2 d-md-flex justify-content-md-end"},ce=["disabled"],be={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},ye={key:1};function ge(f,e,d,l,t,w){const p=b("CommonHeader"),a=b("CommonFooter");return u(),m(V,null,[c(p),e[49]||(e[49]=o("br",null,null,-1)),e[50]||(e[50]=o("br",null,null,-1)),o("div",R,[o("div",k,[o("div",M,[o("div",E,[o("div",L,[e[48]||(e[48]=o("div",{class:"card-header bg-primary text-white"},[o("h3",{class:"text-center mb-0"},"Rider Registration")],-1)),o("div",S,[o("form",{onSubmit:e[17]||(e[17]=x((...r)=>l.registerRider&&l.registerRider(...r),["prevent"])),enctype:"multipart/form-data"},[o("div",_,[e[23]||(e[23]=o("h5",{class:"text-primary"},"Personal Information",-1)),e[24]||(e[24]=o("hr",null,null,-1)),o("div",F,[o("div",A,[e[18]||(e[18]=o("label",{for:"firstName",class:"form-label"},"First Name",-1)),s(o("input",{type:"text",class:"form-control",id:"firstName","onUpdate:modelValue":e[0]||(e[0]=r=>l.form.firstName=r),required:""},null,512),[[i,l.form.firstName]])]),o("div",B,[e[19]||(e[19]=o("label",{for:"lastName",class:"form-label"},"Last Name",-1)),s(o("input",{type:"text",class:"form-control",id:"lastName","onUpdate:modelValue":e[1]||(e[1]=r=>l.form.lastName=r),required:""},null,512),[[i,l.form.lastName]])])]),o("div",H,[o("div",j,[e[20]||(e[20]=o("label",{for:"email",class:"form-label"},"Email",-1)),s(o("input",{type:"email",class:"form-control",id:"email","onUpdate:modelValue":e[2]||(e[2]=r=>l.form.email=r),required:""},null,512),[[i,l.form.email]])]),o("div",Y,[e[21]||(e[21]=o("label",{for:"phone",class:"form-label"},"Phone Number",-1)),s(o("input",{type:"tel",class:"form-control",id:"phone","onUpdate:modelValue":e[3]||(e[3]=r=>l.form.phone=r),required:""},null,512),[[i,l.form.phone]])])]),o("div",K,[e[22]||(e[22]=o("label",{for:"address",class:"form-label"},"Address",-1)),s(o("textarea",{class:"form-control",id:"address","onUpdate:modelValue":e[4]||(e[4]=r=>l.form.address=r),rows:"2",required:""},null,512),[[i,l.form.address]])])]),o("div",O,[e[30]||(e[30]=o("h5",{class:"text-primary"},"Identity Information",-1)),e[31]||(e[31]=o("hr",null,null,-1)),o("div",z,[o("div",G,[e[26]||(e[26]=o("label",{for:"identityType",class:"form-label"},"Identity Type",-1)),s(o("select",{class:"form-select",id:"identityType","onUpdate:modelValue":e[5]||(e[5]=r=>l.form.identityType=r),required:""},[...e[25]||(e[25]=[g('<option value="" data-v-ba5ecb65>Select Identity Type</option><option value="passport" data-v-ba5ecb65>Passport</option><option value="national_id" data-v-ba5ecb65>National ID</option><option value="drivers_license" data-v-ba5ecb65>Driver&#39;s License</option><option value="other" data-v-ba5ecb65>Other</option>',5)])],512),[[y,l.form.identityType]])]),o("div",J,[e[27]||(e[27]=o("label",{for:"identityNumber",class:"form-label"},"Identity Number",-1)),s(o("input",{type:"text",class:"form-control",id:"identityNumber","onUpdate:modelValue":e[6]||(e[6]=r=>l.form.identityNumber=r),required:""},null,512),[[i,l.form.identityNumber]])])]),o("div",Q,[e[28]||(e[28]=o("label",{for:"identityDocument",class:"form-label"},"Identity Document (Passport Photo)",-1)),o("input",{type:"file",class:"form-control",id:"identityDocument",onChange:e[7]||(e[7]=(...r)=>l.handleIdentityDocumentUpload&&l.handleIdentityDocumentUpload(...r)),accept:"image/*",capture:"environment"},null,32),e[29]||(e[29]=o("small",{class:"text-muted"},"You can upload an image or take a photo using your device camera (optional)",-1))]),l.identityDocumentPreview?(u(),m("div",W,[o("img",{src:l.identityDocumentPreview,alt:"Identity Document Preview",class:"img-thumbnail",style:{"max-height":"200px"}},null,8,X)])):P("",!0)]),o("div",Z,[e[34]||(e[34]=o("h5",{class:"text-primary"},"License Information",-1)),e[35]||(e[35]=o("hr",null,null,-1)),o("div",$,[o("div",ee,[e[32]||(e[32]=o("label",{for:"licenseNumber",class:"form-label"},"License Number",-1)),s(o("input",{type:"text",class:"form-control",id:"licenseNumber","onUpdate:modelValue":e[8]||(e[8]=r=>l.form.licenseNumber=r),required:""},null,512),[[i,l.form.licenseNumber]])]),o("div",oe,[e[33]||(e[33]=o("label",{for:"licenseExpiry",class:"form-label"},"License Expiry Date",-1)),s(o("input",{type:"date",class:"form-control",id:"licenseExpiry","onUpdate:modelValue":e[9]||(e[9]=r=>l.form.licenseExpiry=r),required:""},null,512),[[i,l.form.licenseExpiry]])])])]),o("div",le,[e[41]||(e[41]=o("h5",{class:"text-primary"},"Vehicle Information",-1)),e[42]||(e[42]=o("hr",null,null,-1)),o("div",re,[o("div",te,[e[37]||(e[37]=o("label",{for:"vehicleType",class:"form-label"},"Vehicle Type",-1)),s(o("select",{class:"form-select",id:"vehicleType","onUpdate:modelValue":e[10]||(e[10]=r=>l.form.vehicleType=r),required:""},[...e[36]||(e[36]=[g('<option value="" data-v-ba5ecb65>Select Vehicle Type</option><option value="bicycle" data-v-ba5ecb65>Bicycle</option><option value="motorcycle" data-v-ba5ecb65>Motorcycle</option><option value="car" data-v-ba5ecb65>Car</option><option value="van" data-v-ba5ecb65>Van</option><option value="truck" data-v-ba5ecb65>Truck</option>',6)])],512),[[y,l.form.vehicleType]])]),o("div",se,[e[38]||(e[38]=o("label",{for:"vehiclePlate",class:"form-label"},"Vehicle Plate Number",-1)),s(o("input",{type:"text",class:"form-control",id:"vehiclePlate","onUpdate:modelValue":e[11]||(e[11]=r=>l.form.vehiclePlate=r),required:""},null,512),[[i,l.form.vehiclePlate]])])]),o("div",ie,[o("div",ae,[e[39]||(e[39]=o("label",{for:"vehicleModel",class:"form-label"},"Vehicle Model",-1)),s(o("input",{type:"text",class:"form-control",id:"vehicleModel","onUpdate:modelValue":e[12]||(e[12]=r=>l.form.vehicleModel=r)},null,512),[[i,l.form.vehicleModel]])]),o("div",ne,[e[40]||(e[40]=o("label",{for:"vehicleColor",class:"form-label"},"Vehicle Color",-1)),s(o("input",{type:"text",class:"form-control",id:"vehicleColor","onUpdate:modelValue":e[13]||(e[13]=r=>l.form.vehicleColor=r)},null,512),[[i,l.form.vehicleColor]])])])]),o("div",de,[e[46]||(e[46]=o("h5",{class:"text-primary"},"Account Information",-1)),e[47]||(e[47]=o("hr",null,null,-1)),o("div",me,[o("div",ue,[e[43]||(e[43]=o("label",{for:"username",class:"form-label"},"Username",-1)),s(o("input",{type:"text",class:"form-control",id:"username","onUpdate:modelValue":e[14]||(e[14]=r=>l.form.username=r),required:""},null,512),[[i,l.form.username]])]),o("div",fe,[e[44]||(e[44]=o("label",{for:"password",class:"form-label"},"Password",-1)),s(o("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":e[15]||(e[15]=r=>l.form.password=r),required:""},null,512),[[i,l.form.password]])])]),o("div",ve,[e[45]||(e[45]=o("label",{for:"confirmPassword",class:"form-label"},"Confirm Password",-1)),s(o("input",{type:"password",class:"form-control",id:"confirmPassword","onUpdate:modelValue":e[16]||(e[16]=r=>l.form.confirmPassword=r),required:""},null,512),[[i,l.form.confirmPassword]])])]),o("div",pe,[o("button",{type:"submit",class:"btn btn-primary btn-lg px-5",disabled:l.loading},[l.loading?(u(),m("span",be)):(u(),m("span",ye,"Register as Rider"))],8,ce)])],32)])])])]),c(a)])])],64)}const Ve=q(D,[["render",ge],["__scopeId","data-v-ba5ecb65"]]);export{Ve as default};
