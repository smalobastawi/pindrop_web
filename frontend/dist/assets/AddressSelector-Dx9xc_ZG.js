import{r as d,B as _,s as S,q as w,e as f,f as s,L as I,H as L,h as k,j as A,M as V,o as p}from"./vendor-CVqOb0XR.js";import{_ as x}from"./index-Ba6kPx5P.js";const N={class:"address-selector"},P=["for"],E={class:"d-flex"},T=["id","placeholder"],B=["disabled"],C={key:0,class:"spinner-border spinner-border-sm me-1"},D=["rows","placeholder"],M={__name:"AddressSelector",props:{modelValue:{type:String,default:""},label:{type:String,default:"Address"},placeholder:{type:String,default:"Search for a place..."},addressPlaceholder:{type:String,default:"Selected address will appear here..."},rows:{type:Number,default:2},inputId:{type:String,default:()=>`address-input-${Date.now()}`}},emits:["update:modelValue"],setup(a,{emit:g}){const c=a,i=g,b=d(null),u=d(null),o=d(c.modelValue),l=d(!1),h=e=>{const t=e.detail.place;t.geometry&&(u.value=t,o.value=t.formatted_address,i("update:modelValue",t.formatted_address))},v=()=>{if(!navigator.geolocation){alert("Geolocation is not supported by this browser.");return}l.value=!0,navigator.geolocation.getCurrentPosition(e=>{const t=e.coords.latitude,n=e.coords.longitude,m=new google.maps.LatLng(t,n);new google.maps.Geocoder().geocode({location:m},(r,y)=>{l.value=!1,y==="OK"&&r[0]?(u.value={geometry:{location:m},formatted_address:r[0].formatted_address},o.value=r[0].formatted_address,i("update:modelValue",r[0].formatted_address)):alert("Unable to retrieve address for your location.")})},e=>{switch(l.value=!1,e.code){case e.PERMISSION_DENIED:alert("Location access denied by user.");break;case e.POSITION_UNAVAILABLE:alert("Location information is unavailable.");break;case e.TIMEOUT:alert("Location request timed out.");break;default:alert("An unknown error occurred.");break}},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})};return _(()=>c.modelValue,e=>{e!==o.value&&(o.value=e)}),S(async()=>{await w()}),(e,t)=>(p(),f("div",N,[s("label",{for:a.inputId,class:"form-label"},L(a.label),9,P),s("div",E,[s("gmp-place-autocomplete",{id:a.inputId,ref_key:"searchInput",ref:b,class:"form-control mb-2 me-2",placeholder:a.placeholder,"location-restriction":"KE",onGmpPlaceselect:h},null,40,T),s("button",{type:"button",class:"btn btn-outline-secondary mb-2",onClick:v,disabled:l.value},[l.value?(p(),f("span",C)):k("",!0),t[1]||(t[1]=A(" ðŸ“ Current Location ",-1))],8,B)]),I(s("textarea",{"onUpdate:modelValue":t[0]||(t[0]=n=>o.value=n),class:"form-control mt-2",rows:a.rows,placeholder:a.addressPlaceholder,readonly:""},null,8,D),[[V,o.value]])]))}},q=x(M,[["__scopeId","data-v-374a030e"]]);export{q as A};
